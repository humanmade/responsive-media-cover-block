(()=>{"use strict";const e=window.wp.components,i=window.wp.data,t=window.wp.compose,o=window.wp.plugins,l=window.wp.element,d=window.wp.blockEditor,r=window.wp.mediaUtils,s=window.ReactJSXRuntime,n=(0,t.createHigherOrderComponent)((t=>o=>{const{attributes:n,setAttributes:a}=o,c=n?.mobileMediaId,w=(0,i.useSelect)((e=>{const i=e("core").getMedia(c),t=i?.media_details.sizes?.thumbnail||{};return i?{id:i.id,alt:i.alt_text||"",src:t.source_url||i.source_url,width:t.width||i.width,height:t.height||i.height,type:i.mime_type.replace(/\/.+$/,""),file:i.media_details.file||""}:null}),[c]);return"core/cover"!==o.name?(0,s.jsx)(t,{...o}):(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)(t,{...o}),(0,s.jsx)(d.InspectorControls,{children:(0,s.jsxs)(e.PanelBody,{title:"Mobile Media",initialOpen:!0,children:[(0,s.jsx)(e.PanelRow,{children:(0,s.jsx)("p",{children:"Select a media file to be shown on mobile."})}),(0,s.jsx)(e.PanelRow,{children:(0,s.jsx)(d.MediaUploadCheck,{children:(0,s.jsx)(r.MediaUpload,{onSelect:e=>a({mobileMediaId:e.id}),allowedTypes:["image","video"],render:({open:i})=>(0,s.jsx)(e.Button,{onClick:i,isDefault:!0,isLarge:!0,children:n.mobileMediaId?"Change Mobile Media":"Select Mobile Media"})})})}),n.mobileMediaId&&(0,s.jsxs)(e.PanelRow,{children:["image"===w?.type&&(0,s.jsx)("img",{src:w.src,alt:w.alt}),"video"===w?.type&&(0,s.jsx)(l.Fragment,{children:`Video selected ${w.file}`}),!w&&c&&(0,s.jsx)(e.Spinner,{})]})]})})]})}),"withMobileAttributes");wp.hooks.addFilter("blocks.registerBlockType","hm-responsive-media-cover-block/attributes",((e,i)=>"core/cover"!==i?e:{...e,attributes:{...e.attributes,mobileMediaId:{type:"number"}}})),wp.hooks.addFilter("editor.BlockEdit","hm-responsive-media-cover-block/with-mobile-attributes",n),(0,o.registerPlugin)("hm-responsive-media-cover-block",{render:()=>null})})();